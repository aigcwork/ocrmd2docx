ROSTemplateFormatVersion: '2015-09-01'
Transform: Aliyun::Serverless-2018-04-03
Resources:
  md2docx-service:
    Type: Aliyun::Serverless::Service
    Properties:
      Description: 'MD2DOCX Backend Service'
      InternetAccess: true
      LogConfig:
        Project: md2docx-log
        Logstore: function-log
      VpcConfig:
        VpcId: Auto
        VSwitchIds: []
        SecurityGroupId: Auto
      NasConfig: Auto
    md2docx-function:
      Type: Aliyun::Serverless::Function
      Properties:
        Description: 'MD2DOCX Backend Function'
        Handler: app.app  # 使用app.py中的app对象
        Runtime: python3.9
        CodeUri: ./
        MemorySize: 1024
        Timeout: 120
        EnvironmentVariables:
          DOUBAO_API_KEY: ${env.DOUBAO_API_KEY}
          PYTHONUNBUFFERED: '1'
          TMPDIR: '/tmp'
        Events:
          httpTrigger:
            Type: HTTP
            Properties:
              AuthType: ANONYMOUS
              Methods: ['GET', 'POST', 'PUT', 'DELETE', 'HEAD', 'OPTIONS']
              # 设置为自定义域名或路径
              # 如果需要自定义域名，可以在函数计算控制台配置